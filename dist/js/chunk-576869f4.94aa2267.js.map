{"version":3,"sources":["webpack:///./src/views/Dashboard.vue?1282","webpack:///./src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?8dc4"],"names":["class","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","to","aria-current","logout","checkSuccess","data","methods","checkLogin","token","document","cookie","replace","this","$http","defaults","headers","common","Authorization","url","post","then","res","success","$swal","title","message","icon","$router","push","catch","err","created","render"],"mappings":"gHAAA,W,4DCEOA,MAAM,+C,GACJA,MAAM,a,EAEN,eAAqC,QAA/BA,MAAM,eAAc,QAAI,G,EAEjC,eAUS,UATPA,MAAM,iBACNC,KAAK,SACLC,iBAAe,WACfC,iBAAe,sBACfC,gBAAc,qBACdC,gBAAc,QACdC,aAAW,qB,CAEX,eAAyC,QAAnCN,MAAM,0B,MAETA,MAAM,2BAA2BO,GAAG,sB,GACnCP,MAAM,c,iBAGH,Q,iBAQA,U,EAuBb,eAAmB,wB,gJAnDnB,eA+CM,MA/CN,EA+CM,CA9CJ,eA6CM,MA7CN,EA6CM,CA5CJ,eAEC,GAFYA,MAAM,eAAeQ,GAAG,K,yBAClC,iBAAqC,CAArC,M,MAEH,EAWA,eA6BM,MA7BN,EA6BM,CA5BJ,eA2BK,KA3BL,EA2BK,CA1BH,eAIK,WAHH,eAEC,GAFYR,MAAM,WAAWS,eAAa,OAAOD,GAAG,W,yBAClD,iBAAI,C,cAGT,eAOK,WANH,eAKC,GAJCR,MAAM,WACNS,eAAa,OACbD,GAAG,uB,yBACF,iBAAM,C,cAWX,eAIK,WAHH,eAES,UAFDP,KAAK,SAASD,MAAM,eAAgB,QAAK,8BAAE,EAAAU,QAAA,EAAAA,OAAA,sBAAQ,kBASlD,EAAAC,c,iBAAnB,eAA+C,Y,sBAE/C,G,4BAIa,GACbC,KADa,WAEX,MAAO,CACLD,aAAc,KAGlBE,QAAS,CAEPC,WAFO,WAEM,WAELC,EAAQC,SAASC,OAAOC,QAC5B,iDACA,MAGF,GAAIH,EAAO,CAETI,KAAKC,MAAMC,SAASC,QAAQC,OAAOC,cAAnC,UAAsDT,GAEtD,IAAMU,EAAE,UAAO,wCAAP,kBACRN,KAAKC,MAAMM,KAAKD,GAAKE,MAAK,SAACC,GACrBA,EAAIhB,KAAKiB,QACX,EAAKlB,cAAe,GAEpB,EAAKmB,MAAM,CACTC,MAAOH,EAAIhB,KAAKoB,QAChBC,KAAM,UAER,EAAKC,QAAQC,KAAK,mBAItBhB,KAAKW,MAAM,CACTC,MAAO,SACPE,KAAM,UAERd,KAAKe,QAAQC,KAAK,WAItBzB,OAlCO,WAkCE,WACDe,EAAE,UAAO,wCAAP,UACRN,KAAKC,MAAMM,KAAKD,GACbE,MAAK,SAACC,GACDA,EAAIhB,KAAKiB,SAGXb,SAASC,OAAS,8BAClB,EAAKa,MAAM,CACTC,MAAOH,EAAIhB,KAAKoB,UAElB,EAAKE,QAAQC,KAAK,WAElB,EAAKL,MAAM,CACTC,MAAOH,EAAIhB,KAAKoB,QAChBC,KAAM,aAIXG,OAAM,SAACC,GACN,EAAKP,MAAM,CACTC,MAAOM,EACPJ,KAAM,eAKhBK,QAnEa,WAoEXnB,KAAKL,e,UCxHT,EAAOyB,OAASA,EAED,gB","file":"js/chunk-576869f4.94aa2267.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Dashboard.vue?vue&type=style&index=0&id=0fb2f8de&lang=scss\"","<!-- 後台 -->\n<template>\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-info\">\n    <div class=\"container\">\n      <router-link class=\"navbar-brand\" to=\"/\"\n        ><span class=\"caveat fs-3\">FIV5</span></router-link\n      >\n      <button\n        class=\"navbar-toggler\"\n        type=\"button\"\n        data-bs-toggle=\"collapse\"\n        data-bs-target=\"#navbarNavAltMarkup\"\n        aria-controls=\"navbarNavAltMarkup\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\n        <ul class=\"navbar-nav\">\n          <li>\n            <router-link class=\"nav-link\" aria-current=\"page\" to=\"/orders\"\n              >後台訂單</router-link\n            >\n          </li>\n          <li>\n            <router-link\n              class=\"nav-link\"\n              aria-current=\"page\"\n              to=\"/product-management\"\n              >後台產品管理</router-link\n            >\n          </li>\n          <!-- <li>\n            <router-link\n              class=\"nav-link\"\n              aria-current=\"page\"\n              to=\"/coupon-set\"\n              >折價卷設定</router-link\n            >\n          </li> -->\n          <li>\n            <button type=\"button\" class=\"btn nav-link\" @click=\"logout\">\n              登出\n            </button>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </nav>\n  <!-- 主顯示區塊後台子頁面用 配合checkLogin()決定是否顯示子router區塊-->\n  <router-view v-if=\"checkSuccess\"></router-view>\n  <!-- footer -->\n  <section></section>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      checkSuccess: '',\n    };\n  },\n  methods: {\n    // 確認登入-token\n    checkLogin() {\n      // 取出token 驗證\n      const token = document.cookie.replace(\n        /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\n        '$1',\n      );\n      // 如果有token\n      if (token) {\n        // axios 預設值\n        this.$http.defaults.headers.common.Authorization = `${token}`;\n        // 登入及驗證-檢查用戶是否仍持續登入\n        const url = `${process.env.VUE_APP_API}api/user/check`;\n        this.$http.post(url).then((res) => {\n          if (res.data.success) {\n            this.checkSuccess = true;\n          } else {\n            this.$swal({\n              title: res.data.message,\n              icon: 'error',\n            });\n            this.$router.push('/login');\n          }\n        });\n      } else {\n        this.$swal({\n          title: '未有登入資訊',\n          icon: 'error',\n        });\n        this.$router.push('/login');\n      }\n    },\n    // 登出並清除token轉回登入頁\n    logout() {\n      const url = `${process.env.VUE_APP_API}logout`;\n      this.$http.post(url)\n        .then((res) => {\n          if (res.data.success) {\n            // 清除 token 的語法 這是將 cookie 中的 token 及到期日清空的語法。\n            // document.cookie = '（你的token名）=; expires=; path=/';\n            document.cookie = 'hexToken=;expires=; path=/;';\n            this.$swal({\n              title: res.data.message,\n            });\n            this.$router.push('/login');\n          } else {\n            this.$swal({\n              title: res.data.message,\n              icon: 'error',\n            });\n          }\n        })\n        .catch((err) => {\n          this.$swal({\n            title: err,\n            icon: 'error',\n          });\n        });\n    },\n  },\n  created() {\n    this.checkLogin();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap');\n.caveat {\n  font-family: 'Caveat', cursive;\n}\n</style>\n","import { render } from \"./Dashboard.vue?vue&type=template&id=0fb2f8de\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=0fb2f8de&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}